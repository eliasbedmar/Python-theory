<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 7.14 (458244)"/><meta name="altitude" content="9.002455711364746"/><meta name="author" content="eliasbedmar@gmail.com"/><meta name="created" content="2020-04-03 08:13:08 +0000"/><meta name="latitude" content="52.1796005606087"/><meta name="longitude" content="0.149966836813844"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2020-04-05 12:20:57 +0000"/><title>Python - Execution Modes/Best practices</title></head><body><div><span style="font-size: 24px;"><u>Running Python</u></span></div><ul><li><div>Scripts vs Modules:</div></li><ul><li><div>Scripts - plain text file (.py) to be <u>executed</u> directly by user - top-level program file</div></li><li><div>Modules - plain text file (.py) to be <u>imported</u> and used from another Python file (script or module)</div></li></ul><li><div>Python interpreter - later of software between code and machine (code in Python is converted into machine-readable code). Any code you run must be ran via the interpreter. In compiled programming languages, the equivalent to the interpreter is the compiler.</div></li><ul><li><div>The Python interpreter can be a program written in different languages - C (CPython), Java (JYthon), Python (PyPy), .NET (IronPython.</div></li></ul><li><div><b>Execution modes: </b>2 ways to run code using the interpreter <b>(execution modes)</b>:</div></li><ul><li><div>Running a <b>script</b> or a module in the <b>CLI</b> “statically”:<br/></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>python <i>filename.py</i></div></div><ul><ul><li><div>Importing a Module into another Module/Script or Typing in code directly into an <b>interactive interpreter session</b><br/></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>import <i>child_module</i> from <i>library</i></div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>elias.bedmar.fresneda@ibm.com@ip-192-168-0-11  ~  python</div><div>Python 3.7.2 (default, Feb 13 2020, 17:10:23)</div><div>[Clang 11.0.0 (clang-1100.0.33.17)] on darwin</div><div>Type "help", "copyright", "credits" or "license" for more information.</div><div>&gt;&gt;&gt; print('This is code run via an interactive Python interpreter')</div></div><ul><li><div>You can use an IDE - Integrated Development Environment that contains the Interpreter, Edit features…so you can write code and Run directly</div></li></ul><div><br/></div><div><font><u><span style="font-size: 24px;">main() function</span></u></font></div><ul><li><div>main() function - <b>Entry point</b> for many programming languages (called automatically by OS, Not for Python)</div></li><ul><li><div>where the first instructions of a program are executed</div></li><li><div>where the program has access to command line arguments </div></li></ul><li><div>In Python - Python interpreter executes scripts starting at the top of the file - <b>no specific function that gets executed automatically</b></div></li><li><div>However - useful to have main() within Python - common pattern in Python files that you want to be <span style="font-weight: bold;">executed as a script and</span><span style="color: rgb(34, 34, 34); font-family: &quot;source sans pro&quot;, -apple-system, system-ui, &quot;segoe ui&quot;, Roboto, &quot;helvetica neue&quot;, Arial, sans-serif, &quot;apple color emoji&quot;, &quot;segoe ui emoji&quot;, &quot;segoe ui symbol&quot;; font-size: 18px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"> </span><span style="font-weight: bold;">imported in another module</span></div></li></ul><div><br/></div><div style="background-color:rgb(246, 246, 246);color:rgb(33, 37, 41);font-family:SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace;font-size:14.4px;font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;line-height:1.5em;orphans:2;widows:2;word-spacing:0px;"><span style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; color: rgb(32, 74, 135); overflow-wrap: normal; word-break: normal; white-space: pre;">def</span><span style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; overflow-wrap: normal; word-break: normal; white-space: pre;" /><span style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; color: rgb(0, 0, 0); overflow-wrap: normal; word-break: normal; white-space: pre;">main</span><span style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; color: rgb(0, 0, 0); overflow-wrap: normal; word-break: normal; white-space: pre;">():</span></div><div style="background-color:rgb(246, 246, 246);color:rgb(33, 37, 41);font-family:SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace;font-size:14.4px;font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;line-height:1.5em;orphans:2;widows:2;word-spacing:0px;"><span style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; overflow-wrap: normal; word-break: normal; white-space: pre;">    </span><span style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; color: rgb(32, 74, 135); overflow-wrap: normal; word-break: normal; white-space: pre;">print</span><span style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; color: rgb(0, 0, 0); overflow-wrap: normal; word-break: normal; white-space: pre;">(</span><span style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; color: rgb(78, 154, 6); overflow-wrap: normal; word-break: normal; white-space: pre;">"Hello World!"</span><span style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; color: rgb(0, 0, 0); overflow-wrap: normal; word-break: normal; white-space: pre;">)</span></div><div style="background-color:rgb(246, 246, 246);color:rgb(33, 37, 41);font-family:SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace;font-size:14.4px;font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;line-height:1.5em;orphans:2;widows:2;word-spacing:0px;"><br/></div><div style="background-color:rgb(246, 246, 246);color:rgb(33, 37, 41);font-family:SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace;font-size:14.4px;font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;line-height:1.5em;orphans:2;widows:2;word-spacing:0px;"><span style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; color: rgb(32, 74, 135); overflow-wrap: normal; word-break: normal; white-space: pre;">if</span><span style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; overflow-wrap: normal; word-break: normal; white-space: pre;" /><span style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; overflow-wrap: normal; word-break: normal; white-space: pre;">__name__</span><span style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; overflow-wrap: normal; word-break: normal; white-space: pre;" /><span style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; color: rgb(206, 92, 0); overflow-wrap: normal; word-break: normal; white-space: pre;">==</span><span style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; overflow-wrap: normal; word-break: normal; white-space: pre;" /><span style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; color: rgb(78, 154, 6); overflow-wrap: normal; word-break: normal; white-space: pre;">"__main__"</span><span style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; color: rgb(0, 0, 0); overflow-wrap: normal; word-break: normal; white-space: pre;">:</span></div><div style="background-color:rgb(246, 246, 246);color:rgb(33, 37, 41);font-family:SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace;font-size:14.4px;font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;line-height:1.5em;orphans:2;widows:2;word-spacing:0px;"><span style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; overflow-wrap: normal; word-break: normal; white-space: pre;">    </span><span style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; color: rgb(0, 0, 0); overflow-wrap: normal; word-break: normal; white-space: pre;">main</span><span style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;liberation mono&quot;, &quot;courier new&quot;, monospace; color: rgb(0, 0, 0); overflow-wrap: normal; word-break: normal; white-space: pre;">()</span></div><div><br/></div><ul><li><div>__name__ - Special variable Python always defines - Value depends on how code is being executed</div></li><ul><li><div>repr(__name__) - will show the representation of the object __name__ as a string</div></li></ul></ul><div><br/></div><div><b>Value of __name__</b></div><ul><li><div>"A module’s __name__ is set equal to '__main__' when read from standard input, a script, or from an interactive prompt."</div></li><li><div>Depends on <b>execution mode:</b></div></li></ul><ul><ul><li><div>CLI:<b> __name__ = ‘__main__'</b></div></li><li><div>Importing a module into another Module or into Interactive Interpreter: <b>__name__ = '__childmodulefilename__'</b></div></li><ul><li><div>If the module gets imported again - it won’t be run as a script again. i.e. Modules imported only get executed once.</div></li></ul></ul></ul><div><b><br/></b></div><div><span style="font-size: 24px;"><u>Best practices</u></span></div><ul><li><div>Making code that can run as a script AND as a module imported into another module/interactive session - best practices:</div></li><ul><li><div>Put most code into a Function or Class</div></li><li><div>Using __name__ to control execution of code</div></li><li><div>Create function main() to contain the code to be run</div></li><li><div>Call other functions from main()</div></li></ul></ul><div><br/></div><ol><li><div>Putting most code into Function/Class</div></li><ul><li><div>When Python encounters def/Class - it stores the definition. It doesn’t execute unless instructed to do so. Especially for resource intensive code.</div></li><li><div>These can then be imported into other modules/scripts - and executed (execute functions/create objects)</div></li></ul><li><div>Using <b style="font-style: italic;">if __name__ == “main” </b>to control the Execution of your code</div></li><ul><li><div>That constrains the module code to run <b>only </b>when __name__ is equal to “”__main__: i.e. when the script is run from the CLI, not when being imported. Conditional running of modules.</div></li></ul><li><div>Create a function called <b>main() </b>to contain code you want to run</div></li><ul><li><div>entry point to code - starting point of the code that accomplishes primary task</div></li><li><div>It should contain any code you want to run when the Python interpreter esecutes the file</div></li><li><div>Better than putting the code directly into -<i> if __name__</i> conditional block - as this way the user can reuse main() if they import the module.</div></li></ul><li><div>Call other functions from <b>main()</b></div></li><ul><li><div>Calling other functions from main() instead of having the ’task-accomplishing’ code in main()</div></li><li><div>Useful when you can compose the overall task from several smaller sub-task that can execute independently</div></li><ul><li><div>All sub-tasks to be defined as different functions</div></li><li><div>Easier for user/others to re-use only parts of the steps if they want</div></li><li><div>main() -&gt; to contain the ‘default’ workflow, so the whole process can be used</div></li></ul></ul></ol><div><br/></div><div><br/></div><div><b>Module.py</b></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>from time import sleep</div><div><div><br/></div><div><br/></div></div><div>print("This is my file to demonstrate best practices.")</div><div><div><br/></div><div><br/></div></div><div>print("The value of __name__ is:", repr(__name__))</div><div><div><br/></div><div><br/></div></div><div>def process_data(data):</div><div>    print("Beginning data processing...")</div><div>    modified_data = data + " that has been modified"</div><div>    sleep(3)</div><div>    print("Data processing finished.")</div><div>    return modified_data</div><div><div><br/></div><div><br/></div></div><div>def read_data_from_web():</div><div>    print("Reading data from the Web")</div><div>    data = "Data from the Web"</div><div>    return data</div><div><div><br/></div><div><br/></div></div><div>def write_data_to_database(data):</div><div>    print("Writing data to database:")</div><div>    print(data)</div><div><div><br/></div><div><br/></div></div><div># Def function [entry point] with default workflow</div><div>def main():</div><div>    data = read_data_from_web()</div><div>    modified_data=process_data(data)</div><div>    write_data_to_database(modified_data)</div><div><div><br/></div><div><br/></div></div><div>if __name__ == '__main__':</div><div>    main()</div></div><div><br/></div><div><b>Script.py (calling module)</b></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>import module as module</div><div><div><br/></div><div><br/></div></div><div>print('This is the script calling a module')</div><div><div><br/></div><div><br/></div></div><div>print('Execution mode for script - value of __name__:',repr(__name__))</div><div><div><br/></div><div><br/></div></div><div>#Running whole workflow from module:</div><div>print('Running whole workflow:')</div><div>module.main()</div><div><div><br/></div><div><br/></div></div><div>#Running selected functions() from module</div><div>inputdata = 'Input custom data'</div><div>print('Running parts of the workflow for data',inputdata)</div><div><div><br/></div><div><br/></div></div><div>modified_data=module.process_data(inputdata)</div><div>module.write_data_to_database(modified_data)</div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><u><br/></u></div></body></html>
